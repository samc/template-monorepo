datasource db {
  provider = "sqlite"
  url      = "file:dev.db"
}

generator go {
  provider = "go run github.com/prisma/prisma-client-go"
  output   = "./db"
  package  = "db"
}

model Account {
  id         String      @id @default(cuid())
  email      String      @unique
  credential Credential?
}

model Credential {
  id        String            @id @default(cuid())
  accountId String            @unique
  account   Account           @relation(fields: [accountId], references: [id])
  basic     CredentialBasic?
  oauth2    CredentialOAuth2?
  type      String
}

model CredentialBasic {
  id           String     @id @default(cuid())
  credentialId String     @unique
  credential   Credential @relation(fields: [credentialId], references: [id])
  username     String
  hash         String
}

model CredentialOAuth2 {
  id           String     @id @default(cuid())
  credentialId String     @unique
  credential   Credential @relation(fields: [credentialId], references: [id])
  access       String
  refresh      String
}

// enum CredentialType {
//   CREDENTIAL_TYPE_UNSPECIFIED
//   CREDENTIAL_TYPE_BASIC
//   CREDENTIAL_TYPE_OAUTH2
// }
